(this["webpackJsonpgeek-app-89"]=this["webpackJsonpgeek-app-89"]||[]).push([[0],{196:function(e,t,n){e.exports={root:"KeepAlive_root__2ITk6"}},208:function(e,t,n){e.exports={root:"input-extra_root__2CKsV"}},210:function(e,t,n){e.exports={root:"Login_root__201yb"}},211:function(e,t,n){e.exports={root:"Layout_root__2FMoD"}},212:function(e,t,n){e.exports={root:"PreviousRoute_root__1gf55"}},213:function(e,t,n){e.exports={root:"Channels_root__4cOG1"}},215:function(e,t,n){e.exports={root:"Image_root__34eRa"}},216:function(e,t,n){e.exports={root:"ArticleItem_root__2HXJZ"}},217:function(e,t,n){e.exports={root:"ArticleList_root__uN_Lu"}},218:function(e,t,n){e.exports={root:"Home_root__2bSLb"}},219:function(e,t,n){e.exports={root:"Question_root__1pLnZ"}},220:function(e,t,n){e.exports={root:"Video_root__1VyXb"}},221:function(e,t,n){e.exports={root:"Profile_root__3YLUM"}},222:function(e,t,n){e.exports={root:"Edit_root__2iBiN"}},223:function(e,t,n){e.exports={root:"EditList_root__2lNE2"}},224:function(e,t,n){e.exports={root:"EditInput_root__2pUY9"}},225:function(e,t,n){e.exports={root:"Search_root__1m6F-"}},227:function(e,t,n){e.exports={root:"Result_root__N5_Q0"}},229:function(e,t,n){e.exports={root:"Sticky_root__24ckk"}},230:function(e,t,n){e.exports={root:"NoneComment_root__3Ljl-"}},231:function(e,t,n){e.exports={root:"CommentItem_root__3E5IE"}},232:function(e,t,n){e.exports={root:"CommentInput_root__7h4rk"}},233:function(e,t,n){e.exports={root:"CommentFooter_root__SD7k7"}},234:function(e,t,n){e.exports={root:"Reply_root__qK4mS"}},235:function(e,t,n){e.exports={root:"Share_root__2JyBK"}},236:function(e,t,n){e.exports={root:"Article_root__2yy1P"}},239:function(e,t,n){e.exports={root:"Chat_root__uWixs"}},240:function(e,t,n){e.exports={root:"Feedback_root__3lOl4"}},241:function(e,t,n){e.exports={root:"Activity_root__1Ld82"}},242:function(e,t,n){},243:function(e,t,n){e.exports={root:"Announcement_root__JZSzD"}},244:function(e,t,n){e.exports={root:"Statics_root__u2smU"}},245:function(e,t,n){e.exports={root:"Fans_root__2foS-"}},246:function(e,t,n){e.exports={root:"Followed_root__1H6F6"}},247:function(e,t,n){e.exports={root:"Articles_root__1XOqh"}},248:function(e,t,n){e.exports={root:"Notification_root__2k_uX"}},249:function(e,t,n){e.exports={root:"ListAll_root__1nSwi"}},250:function(e,t,n){e.exports={root:"NotiItem_root__4FEca"}},694:function(e,t,n){},703:function(e,t,n){"use strict";n.r(t);var c=n(30),r=n.n(c),a=n(10),s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,706)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},l=n(14),u=n(3),j=n.n(u),d=n(6),p=n(137),b=n.n(p),h="geek-h5_pip__",f=function(){return JSON.parse(localStorage.getItem(h)||"{}")},m=function(e){return localStorage.setItem(h,JSON.stringify(e))},O=function(){return localStorage.removeItem(h)},x=n(28),v=Object(x.a)({basename:"/geek"}),g="http://toutiao.itheima.net/v1_0",y=b.a.create({baseURL:g,timeout:5e3});y.interceptors.request.use((function(e){if(!e.url.startsWith("/authorizations")){var t=f().token;t&&(e.headers.Authorization="Bearer ".concat(t))}return e})),y.interceptors.response.use((function(e){return e}),function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,401!==t.response.status){e.next=11;break}if(n=f(),c=n.refresh_token){e.next=5;break}return e.abrupt("return",v.push("/login",{from:v.location.pathname}));case 5:return e.next=7,b.a.put("".concat(g,"/authorizations"),null,{headers:{Authorization:"Bearer ".concat(c)}});case 7:return r=e.sent,a=r.data.data.token,m({token:a,refresh_token:c}),e.abrupt("return",y(t.config));case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(0),O(),v.push("/login",{from:v.location.pathname}),e.abrupt("return",Promise.reject(t));case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}());var _=n(4),N=n(68),k=n(0),w=n.n(k),C=n(1),S=["children"],I=function(e){var t=e.children,n=Object(N.a)(e,S);return Object(C.jsx)(l.b,Object(_.a)(Object(_.a)({},n),{},{render:function(e){return!!f().token?t:Object(C.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location.pathname}}})}}))},T=n(196),E=n.n(T),A=["activePath","children"],R=function(e){var t=e.activePath,n=e.children,c=Object(N.a)(e,A);return Object(C.jsx)(l.b,Object(_.a)(Object(_.a)({},c),{},{children:function(e){var c=e.location.pathname.startsWith(t);return Object(C.jsx)("div",{className:E.a.root,style:{display:c?"block":"none"},children:n})}}))},L=n(7),M=n(5),F=n(208),U=n.n(F),q=function(e){var t=e.extra,n=e.onExtra,c=e.value,r=e.onChange;return Object(C.jsxs)("div",{className:U.a.root,children:[Object(C.jsx)(M.g,{placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",value:c,onChange:r}),Object(C.jsx)("span",{className:"extra",onClick:n,children:t})]})},z=n(8),P=n.n(z),B=function(e){return Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.get("/sms/codes/".concat(e));case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))},D=function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){var c,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.post("/authorizations",e);case 2:"ok"===(c=t.sent).data.message.toLowerCase()&&(r=c.data.data,m(r),n({type:"login/setToken",payload:r}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,y.patch("/user/profile",e);case 3:n({type:"profile/updateUser",payload:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.patch("/user/photo",e);case 2:c=t.sent,n({type:"profile/updatePhoto",payload:{photo:c.data.data.photo}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){var t=Object(d.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.get("/user/articles",{params:{page:e,per_page:10}});case 2:c=t.sent,n({type:"profile/getUserArticle",payload:c.data.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},H=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.get("/user/".concat(e),{params:{page:t,per_page:10}});case 2:r=n.sent,c({type:"profile/getUserFans",payload:{type:e,data:r.data.data}});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},K=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.get(e,{params:{page:t,per_page:10}});case 2:r=n.sent,c({type:"profile/getUserArticleList",payload:{type:e,data:r.data.data}});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},G={all:"",system:"1",comment:"2",fans:"3",thumbsup:"4"},X=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.get("/user/notify",{params:{type:G[e],page:t,per_page:10}});case 2:r=n.sent,c({type:"profile/getUserNotification",payload:{type:e,data:r.data.data}});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},V=n(11),Q=n(209),Z=n.n(Q),$="geek-h5-home-channel_pip__",ee=function(e){return{type:"home/selectTab",payload:e}},te=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){var r,a,s,i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.get("/articles",{params:{channel_id:e,timestamp:t}});case 2:r=n.sent,a=r.data.data,s=a.pre_timestamp,i=a.results,c({type:"home/getArticles",payload:{prevTime:s,list:i,channelId:e}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ne=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){var r,a,s,i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.get("/articles",{params:{channel_id:e,timestamp:t}});case 2:r=n.sent,a=r.data.data,s=a.pre_timestamp,i=a.results,c({type:"home/getMoreArticles",payload:{prevTime:s,list:i,channelId:e}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ce=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c,r){var a,s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=r(),s=a.article.info.comm_count,c({type:"home/updateCommentMount",payload:{channelId:e,articleId:t,comm_count:s}});case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},re=function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.get("/articles/".concat(e));case 2:c=t.sent,n({type:"article/getArticleById",payload:c.data.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ae=function(e,t,n){return function(){var c=Object(d.a)(j.a.mark((function c(r){var a;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,y.get("/comments",{params:{type:e,source:t,offset:n}});case 2:a=c.sent,r({type:"article/getMoreArticleComments",payload:a.data.data});case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()},se=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=5;break}return n.next=3,y.delete("/user/followings/".concat(e));case 3:n.next=7;break;case 5:return n.next=7,y.post("/user/followings",{target:e});case 7:c({type:"article/updateInfo",payload:{name:"is_followed",value:!t}});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ie=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t?y.delete("/article/collections/".concat(e)):y.post("/article/collections",{target:e}),c({type:"article/updateInfo",payload:{name:"is_collected",value:!t}});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},oe=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!==t){n.next=5;break}return n.next=3,y.delete("/article/likings/".concat(e));case 3:n.next=7;break;case 5:return n.next=7,y.post("/article/likings",{target:e});case 7:c({type:"article/updateInfo",payload:{name:"attitude",value:1===t?0:1}});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},le=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.post("/comments",{target:e,content:t});case 2:r=n.sent,c({type:"article/sendComment",payload:r.data.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ue=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=5;break}return n.next=3,y.delete("/comment/likings/".concat(e));case 3:n.next=7;break;case 5:return n.next=7,y.post("/comment/likings",{target:e});case 7:c({type:"comment/updateInfo",payload:{name:"is_liking",value:!t,target:e,like_count:t?-1:1}});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},je=n(210),de=n.n(je),pe=function(){var e=M.d.useForm(),t=Object(L.a)(e,1)[0],n=Object(l.h)(),c=Object(a.c)(),r=Object(l.g)(),s=Object(k.useState)(0),i=Object(L.a)(s,2),o=i[0],u=i[1],p=Object(k.useRef)(-1),b=Object(k.useRef)(null),h=Object(k.useState)({}),f=Object(L.a)(h,2)[1];Object(k.useEffect)((function(){f({})}),[]);var m=function(){var e=Object(d.a)(j.a.mark((function e(){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o>0)){e.next=2;break}return e.abrupt("return");case 2:if(!(void 0===(n=t.getFieldValue("mobile"))||t.getFieldError("mobile").length>0)){e.next=7;break}return null===(r=b.current)||void 0===r||r.focus(),e.abrupt("return",M.p.show({content:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7",duration:1e3}));case 7:u(59),clearInterval(p.current),p.current=window.setInterval((function(){u((function(e){return 1===e&&clearInterval(p.current),e-1}))}),1e3),c(B(n));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(j.a.mark((function e(t){var a,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(D(t));case 3:M.p.show({content:"\u767b\u5f55\u6210\u529f",duration:600,afterClose:function(){var e;clearInterval(p.current),(null===(e=n.state)||void 0===e?void 0:e.from)?r.replace(n.state.from):r.replace("/home")}}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),i=e.t0,M.p.show({content:null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message,duration:1e3});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:de.a.root,children:[Object(C.jsx)(M.i,{onBack:function(){return r.go(-1)}}),Object(C.jsx)("h1",{className:"title",children:"\u8d26\u53f7\u767b\u5f55"}),Object(C.jsx)("div",{className:"login-wrap",children:Object(C.jsxs)(M.d,{form:t,onFinish:O,children:[Object(C.jsx)(M.d.Item,{name:"mobile",rules:[{required:!0,message:"\u624b\u673a\u53f7\u4e3a\u5fc5\u586b\u9879"},{pattern:/^1[3-9]\d{9}$/,message:"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"}],children:Object(C.jsx)(M.g,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",ref:b})}),Object(C.jsx)(M.d.Item,{name:"code",rules:[{required:!0,message:"\u9a8c\u8bc1\u7801\u4e3a\u5fc5\u586b\u9879"},{pattern:/^\d{6}$/,message:"\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e"}],children:Object(C.jsx)(q,{extra:o<=0?"\u53d1\u9001\u9a8c\u8bc1\u7801":"".concat(o,"s"),onExtra:m})}),Object(C.jsx)(M.d.Item,{noStyle:!0,shouldUpdate:!0,children:function(e){var t=!e.isFieldsTouched(!0)||0!==e.getFieldsError().filter((function(e){return e.errors.length})).length;return Object(C.jsx)(M.a,{block:!0,disabled:t,type:"submit",className:P()("login-button"),children:"\u767b\u5f55"})}}),Object(C.jsx)(M.d.Item,{noStyle:!0,children:Object(C.jsx)("div",{style:{marginTop:20,textAlign:"center"},children:"\u9a8c\u8bc1\u7801\uff1a246810"})})]})})]})},be=n(211),he=n.n(be),fe=function(e){var t=e.type,n=e.className,c=e.onClick;return Object(C.jsx)("svg",{className:P()("icon",n),"aria-hidden":"true",onClick:c,children:Object(C.jsx)("use",{xlinkHref:"#".concat(t)})})},me=n(212),Oe=n.n(me),xe=["children"],ve=function(e){var t=e.children,n=Object(N.a)(e,xe),c=Object(k.useRef)(""),r=Object(l.h)();return Object(k.useEffect)((function(){c.current=r.pathname}),[r.pathname]),Object(C.jsx)(l.b,Object(_.a)(Object(_.a)({},n),{},{children:function(e){var n,r=t,a=null!==e.match,s=Object(l.f)(c.current,"/article/:id"),i=w.a.cloneElement(r,{prevRoute:{prevPathname:c.current,params:null!==(n=null===s||void 0===s?void 0:s.params)&&void 0!==n?n:{}}});return Object(C.jsx)("div",{className:Oe.a.root,style:{display:a?"block":"none"},children:i})}}))},ge=n(213),ye=n.n(ge),_e=function(e){var t=e.onClose,n=Object(a.c)(),c=Object(a.d)((function(e){return e.home})),r=c.channels,s=c.restChannels,i=c.channelActiveIndex,o=Object(k.useState)(!1),l=Object(L.a)(o,2),u=l[0],p=l[1];Object(k.useEffect)((function(){n(function(){var e=Object(d.a)(j.a.mark((function e(t,n){var c,r,a,s,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/channels");case 2:c=e.sent,r=c.data.data.channels,a=n(),s=a.home.channels,i=r,o=Z()(i,s,"id"),t({type:"home/getRestChannels",payload:o});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[n]);var b=function(e){var t;n((t=e,function(){var e=Object(d.a)(j.a.mark((function e(n,c){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c().login.token){e.next=6;break}return e.next=4,y.patch("/user/channels",{channels:[{id:t.id}]});case 4:e.next=9;break;case 6:r=JSON.parse(localStorage.getItem($)||"[]"),a=[].concat(Object(V.a)(r),[t]),localStorage.setItem($,JSON.stringify(a));case 9:n({type:"home/addChannel",payload:t.id});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))},h=function(e,c){var r;u?n((r=e,function(){var e=Object(d.a)(j.a.mark((function e(t,n){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().login.token){e.next=6;break}return e.next=4,y.delete("/user/channels/".concat(r.id));case 4:e.next=9;break;case 6:c=JSON.parse(localStorage.getItem($)||"[]"),a=c.filter((function(e){return e.id!==r.id})),localStorage.setItem($,JSON.stringify(a));case 9:t({type:"home/deleteChannel",payload:r});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())):(n(ee(c)),t())};return Object(C.jsxs)("div",{className:ye.a.root,children:[Object(C.jsx)("div",{className:"channel-header",children:Object(C.jsx)(fe,{type:"iconbtn_channel_close",onClick:t})}),Object(C.jsxs)("div",{className:"channel-content",children:[Object(C.jsxs)("div",{className:P()("channel-item",u?"edit":""),children:[Object(C.jsxs)("div",{className:"channel-item-header",children:[Object(C.jsx)("span",{className:"channel-item-title",children:"\u6211\u7684\u9891\u9053"}),Object(C.jsx)("span",{className:"channel-item-title-extra",children:"\u70b9\u51fb\u8fdb\u5165\u9891\u9053"}),Object(C.jsx)("span",{className:"channel-item-edit",onClick:function(){p(!u)},children:u?"\u4fdd\u5b58":"\u7f16\u8f91"})]}),Object(C.jsx)("div",{className:"channel-list",children:r.map((function(e,t){return Object(C.jsxs)("span",{onClick:function(){return h(e,t)},className:P()("channel-list-item",t===i?"selected":""),children:[e.name,Object(C.jsx)(fe,{type:"iconbtn_tag_close"})]},e.id)}))})]}),Object(C.jsxs)("div",{className:"channel-item",children:[Object(C.jsxs)("div",{className:"channel-item-header",children:[Object(C.jsx)("span",{className:"channel-item-title",children:"\u9891\u9053\u63a8\u8350"}),Object(C.jsx)("span",{className:"channel-item-title-extra",children:"\u70b9\u51fb\u6dfb\u52a0\u9891\u9053"})]}),Object(C.jsx)("div",{className:"channel-list",children:s.map((function(e){return Object(C.jsxs)("span",{className:"channel-list-item",onClick:function(){return b(e)},children:["+ ",e.name]},e.id)}))})]})]})]})},Ne=n(19),ke=n.n(Ne),we=n(214),Ce=n.n(we),Se=(n(469),n(215)),Ie=n.n(Se),Te=Object(k.memo)((function(e){var t=e.src,n=e.className,c=Object(k.useState)(!1),r=Object(L.a)(c,2),a=r[0],s=r[1],i=Object(k.useState)(!0),o=Object(L.a)(i,2),l=o[0],u=o[1],j=Object(k.useRef)(null),d=function(){u(!1)},p=function(){s(!0)};return Object(k.useEffect)((function(){var e=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var n=e.target;n.src=n.dataset.src,t.unobserve(n)}}))}),{rootMargin:"0px 0px 10px 0px"});return e.observe(j.current),function(){return e.disconnect()}}),[]),Object(C.jsxs)("div",{className:P()(Ie.a.root,n),children:[a?Object(C.jsx)("div",{className:"image-icon",children:Object(C.jsx)(fe,{type:"iconphoto-fail"})}):l?Object(C.jsx)("div",{className:"image-icon",children:Object(C.jsx)(fe,{type:"iconphoto"})}):null,a?null:Object(C.jsx)("img",{ref:j,"data-src":t,onLoad:d,onError:p,alt:""})]})})),Ee=n(216),Ae=n.n(Ee);ke.a.locale("zh-cn"),ke.a.extend(Ce.a);var Re,Le=function(e){var t=e.type,n=e.title,c=e.images,r=e.aut_name,a=e.comm_count,s=e.pubdate,i=e.isLogin,o=e.onFeedback;return Object(C.jsxs)("div",{className:Ae.a.root,children:[Object(C.jsxs)("div",{className:P()("article-content",3===t?"t3":"",0===t?"none-mt":""),children:[Object(C.jsx)("h3",{children:n}),0!==t&&Object(C.jsx)("div",{className:"article-imgs",children:c.map((function(e,t){return Object(C.jsx)("div",{className:"article-img-wrapper",children:Object(C.jsx)(Te,{src:e})},t)}))})]}),Object(C.jsxs)("div",{className:P()("article-info",0===t?"none-mt":""),children:[Object(C.jsx)("span",{children:r}),Object(C.jsxs)("span",{children:[a," \u8bc4\u8bba"]}),Object(C.jsx)("span",{children:ke()().from(s)}),i&&Object(C.jsx)("span",{className:"close",onClick:o,children:Object(C.jsx)(fe,{type:"iconbtn_essay_close"})})]})]})},Me=n(217),Fe=n.n(Me),Ue=function(e){var t,n=e.channelId,c=e.activeId,r=e.detailParams,s=Object(l.h)(),i=Object(l.g)(),o=Object(a.c)(),u=null!==(t=Object(a.d)((function(e){return e.home})).articles[n])&&void 0!==t?t:{},p=u.prevTime,b=u.list,h=Object(k.useRef)(!1);Object(k.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==c||!r.isMatch||h.current){e.next=5;break}return h.current=!0,e.next=4,o(ce(n,r.params.id));case 4:setTimeout((function(){h.current=!1}),0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,c,r,o]);var f=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(ne(n,p||+new Date+""));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(te(n,+new Date+""));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:Fe.a.root,style:{display:c===n?"block":"none"},children:Object(C.jsx)("div",{className:"articles",children:Object(C.jsxs)(M.k,{onRefresh:m,children:[b?b.map((function(e){var t=e.art_id,n=e.aut_name,c=e.comm_count,r=e.cover,a=r.type,s=r.images,o=e.pubdate,l={type:a,title:e.title,aut_name:n,comm_count:c,pubdate:o,images:s,isLogin:!1};return Object(C.jsx)("div",{className:"article-item",onClick:function(){return i.push("/article/".concat(t))},children:Object(C.jsx)(Le,Object(_.a)({},l))},t)})):null,Object(C.jsx)(M.f,{hasMore:null!==p&&n===c&&"/home/index"===s.pathname,loadMore:f})]})})})},qe=n(218),ze=n.n(qe),Pe=function(e){var t=e.prevRoute,n=Object(l.h)(),c=Object(l.g)(),r=Object(a.c)(),s=Object(a.d)((function(e){return e.home})),i=s.channels,o=s.channelActiveIndex,u=Object(k.useState)(!1),p=Object(L.a)(u,2),b=p[0],h=p[1],f=Object(k.useRef)(t);Object(k.useEffect)((function(){"/home/index"===n.pathname&&r(function(){var e=Object(d.a)(j.a.mark((function e(t,n){var c,r,a,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().login.token){e.next=9;break}return e.next=4,y.get("/user/channels");case 4:c=e.sent,r=c.data.data.channels,t({type:"home/getMyChannels",payload:r}),e.next=20;break;case 9:if(!((a=JSON.parse(localStorage.getItem($)||"[]")).length>0)){e.next=14;break}t({type:"home/getMyChannels",payload:a}),e.next=20;break;case 14:return e.next=16,y.get("/user/channels");case 16:s=e.sent,i=s.data.data.channels,t({type:"home/getMyChannels",payload:i}),localStorage.setItem($,JSON.stringify(i));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[r,n.pathname]);return Object(C.jsxs)("div",{className:ze.a.root,children:[Object(C.jsx)(M.n,{className:"tabs",activeKey:o+"",onChange:function(e){r(ee(+e)),f.current={prevPathname:"",params:{}}},children:i.map((function(e){var t,n,c,r,a;return Object(C.jsx)(M.n.Tab,{title:e.name,forceRender:!0,children:Object(C.jsx)(Ue,{activeId:o,channelId:e.id,detailParams:{isMatch:null!==(t=null===(n=f.current)||void 0===n||null===(c=n.prevPathname)||void 0===c?void 0:c.startsWith("/article"))&&void 0!==t&&t,params:null!==(r=null===(a=f.current)||void 0===a?void 0:a.params)&&void 0!==r?r:{}}})},e.id+"")}))}),Object(C.jsxs)("div",{className:"tabs-opration",children:[Object(C.jsx)(fe,{type:"iconbtn_search",onClick:function(){return c.push("/search")}}),Object(C.jsx)(fe,{type:"iconbtn_channel",onClick:function(){return h(!0)}})]}),Object(C.jsx)(M.j,{position:"left",className:"channel-popup",visible:b,children:Object(C.jsx)(_e,{onClose:function(){return h(!1)}})})]})},Be=n(219),De=n.n(Be),Je=function(){return Object(C.jsxs)("div",{className:De.a.root,children:[Object(C.jsx)(M.i,{children:"\u95ee\u7b54"}),Object(C.jsxs)("div",{className:"question-list",children:[Object(C.jsxs)("div",{className:"question-item",children:[Object(C.jsxs)("div",{className:"left",children:[Object(C.jsx)("h3",{children:"\u4f5c\u4e3a IT \u884c\u4e1a\u7684\u8fc7\u6765\u4eba\uff0c\u4f60\u6709\u4ec0\u4e48\u8bdd\u60f3\u5bf9\u540e\u8f88\u8bf4\u7684\uff1f"}),Object(C.jsxs)("div",{className:"info",children:[Object(C.jsx)("span",{children:"\u8d5e\u540c 1000+"}),Object(C.jsx)("span",{children:"\u8bc4\u8bba 500+"}),Object(C.jsx)("span",{children:"1\u5c0f\u65f6\u524d"})]})]}),Object(C.jsx)("div",{className:"right",children:Object(C.jsx)("img",{src:"https://pic1.zhimg.com/80/v2-8e77b2771314f674cccba5581560d333_xl.jpg?source=4e949a73",alt:""})})]}),Object(C.jsxs)("div",{className:"question-item",children:[Object(C.jsxs)("div",{className:"left",children:[Object(C.jsx)("h3",{children:"\u4f5c\u4e3a IT \u884c\u4e1a\u7684\u8fc7\u6765\u4eba\uff0c\u4f60\u6709\u4ec0\u4e48\u8bdd\u60f3\u5bf9\u540e\u8f88\u8bf4\u7684\uff1f"}),Object(C.jsxs)("div",{className:"info",children:[Object(C.jsx)("span",{children:"\u8d5e\u540c 1000+"}),Object(C.jsx)("span",{children:"\u8bc4\u8bba 500+"}),Object(C.jsx)("span",{children:"1\u5c0f\u65f6\u524d"})]})]}),Object(C.jsx)("div",{className:"right",children:Object(C.jsx)("img",{src:"https://pic1.zhimg.com/80/v2-8e77b2771314f674cccba5581560d333_xl.jpg?source=4e949a73",alt:""})})]}),Object(C.jsxs)("div",{className:"question-item",children:[Object(C.jsxs)("div",{className:"left",children:[Object(C.jsx)("h3",{children:"\u4f5c\u4e3a IT \u884c\u4e1a\u7684\u8fc7\u6765\u4eba\uff0c\u4f60\u6709\u4ec0\u4e48\u8bdd\u60f3\u5bf9\u540e\u8f88\u8bf4\u7684\uff1f"}),Object(C.jsxs)("div",{className:"info",children:[Object(C.jsx)("span",{children:"\u8d5e\u540c 1000+"}),Object(C.jsx)("span",{children:"\u8bc4\u8bba 500+"}),Object(C.jsx)("span",{children:"1\u5c0f\u65f6\u524d"})]})]}),Object(C.jsx)("div",{className:"right",children:Object(C.jsx)("img",{src:"https://pic1.zhimg.com/80/v2-8e77b2771314f674cccba5581560d333_xl.jpg?source=4e949a73",alt:""})})]}),Object(C.jsxs)("div",{className:"question-item",children:[Object(C.jsxs)("div",{className:"left",children:[Object(C.jsx)("h3",{children:"\u4f5c\u4e3a IT \u884c\u4e1a\u7684\u8fc7\u6765\u4eba\uff0c\u4f60\u6709\u4ec0\u4e48\u8bdd\u60f3\u5bf9\u540e\u8f88\u8bf4\u7684\uff1f"}),Object(C.jsxs)("div",{className:"info",children:[Object(C.jsx)("span",{children:"\u8d5e\u540c 1000+"}),Object(C.jsx)("span",{children:"\u8bc4\u8bba 500+"}),Object(C.jsx)("span",{children:"1\u5c0f\u65f6\u524d"})]})]}),Object(C.jsx)("div",{className:"right",children:Object(C.jsx)("img",{src:"https://pic1.zhimg.com/80/v2-8e77b2771314f674cccba5581560d333_xl.jpg?source=4e949a73",alt:""})})]}),Object(C.jsxs)("div",{className:"question-item",children:[Object(C.jsxs)("div",{className:"left",children:[Object(C.jsx)("h3",{children:"\u4f5c\u4e3a IT \u884c\u4e1a\u7684\u8fc7\u6765\u4eba\uff0c\u4f60\u6709\u4ec0\u4e48\u8bdd\u60f3\u5bf9\u540e\u8f88\u8bf4\u7684\uff1f"}),Object(C.jsxs)("div",{className:"info",children:[Object(C.jsx)("span",{children:"\u8d5e\u540c 1000+"}),Object(C.jsx)("span",{children:"\u8bc4\u8bba 500+"}),Object(C.jsx)("span",{children:"1\u5c0f\u65f6\u524d"})]})]}),Object(C.jsx)("div",{className:"right",children:Object(C.jsx)("img",{src:"https://pic1.zhimg.com/80/v2-8e77b2771314f674cccba5581560d333_xl.jpg?source=4e949a73",alt:""})})]})]})]})},We=n(220),Ye=n.n(We),He=function(){return Object(C.jsxs)("div",{className:Ye.a.root,children:[Object(C.jsx)(M.i,{children:"\u89c6\u9891"}),Object(C.jsxs)("div",{className:"video-list",children:[Object(C.jsxs)("div",{className:"video-item",children:[Object(C.jsx)("h3",{className:"title",children:"\u683c\u529b\u7535\u5668\u5c06\u7ee7\u7eed\u53d1\u5c55\u624b\u673a\u4e1a\u52a1\uff0c\u5e76\u5c06\u5411\u5168\u4ea7\u4e1a\u8986\u76d6\uff01"}),Object(C.jsx)("div",{className:"play",children:Object(C.jsx)("video",{src:"https://ips.ifeng.com/video19.ifeng.com/video09/2021/05/26/p6803231351488126976-102-8-161249.mp4?reqtype=tsl&vid=2c791e3b-444e-4578-83e3-f4808228ae3b&uid=0puFR4&from=v_Free&pver=vHTML5Player_v2.0.0&sver=&se=&cat=&ptype=&platform=pc&sourceType=h5&dt=1622096387396&gid=6a4poXmsep1E&sign=39f76885daca6503ebf90acbfffc1ff1&tm=1622096387396"})}),Object(C.jsx)("span",{children:"1563\u6b21\u64ad\u653e"})]}),Object(C.jsxs)("div",{className:"video-item",children:[Object(C.jsx)("h3",{className:"title",children:"\u4f60\u7528\u4e0a5G\u4e86\u5417\uff1f\u6211\u56fd5G\u624b\u673a\u7ec8\u7aef\u8fbe3.1\u4ebf \u5360\u5168\u7403\u6bd4\u4f8b\u8d8580\uff05"}),Object(C.jsx)("div",{className:"play",children:Object(C.jsx)("video",{src:"https://ips.ifeng.com/video19.ifeng.com/video09/2021/05/26/p6803268684325330944-102-8-184104.mp4?reqtype=tsl&vid=ec74b1e4-d1fa-488b-aaf5-71984ca7d13e&uid=1Vun5L&from=v_Free&pver=vHTML5Player_v2.0.0&sver=&se=&cat=&ptype=&platform=pc&sourceType=h5&dt=1622096310639&gid=fg3vsXmseXFv&sign=38e7c790561e1fd1b57e61a1cbd8031c&tm=1622096310639"})}),Object(C.jsx)("span",{children:"1563\u6b21\u64ad\u653e"})]})]})]})},Ke=n(24),Ge=n(221),Xe=n.n(Ge),Ve=Object(a.b)((function(e){return{profile:e.profile.profile}}),(function(e){return{onGetProfile:function(){return e(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("/user");case 3:n=e.sent,c=n.data,r=c.data,"ok"===c.message.toLowerCase()&&t({type:"profile/getProfile",payload:r}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.profile,n=e.onGetProfile,c=Object(l.g)();Object(k.useEffect)((function(){null===n||void 0===n||n()}),[n]);var r=t,a=r.photo,s=r.name,i=r.like_count,o=r.follow_count,u=r.fans_count,j=r.art_count;return Object(C.jsxs)("div",{className:Xe.a.root,children:[Object(C.jsxs)("div",{className:"profile",children:[Object(C.jsxs)("div",{className:"user-info",children:[Object(C.jsx)("div",{className:"avatar",children:Object(C.jsx)("img",{src:a||"http://toutiao.itheima.net/images/user_head.jpg",alt:""})}),Object(C.jsx)("div",{className:"user-name text-overflow",children:s}),Object(C.jsxs)(Ke.a,{to:"/profile/edit",children:["\u4e2a\u4eba\u4fe1\u606f ",Object(C.jsx)(fe,{type:"iconbtn_right"})]})]}),Object(C.jsxs)("div",{className:"read-info",children:[Object(C.jsx)(fe,{type:"iconbtn_readingtime"}),"\u4eca\u65e5\u9605\u8bfb",Object(C.jsx)("span",{children:"10"}),"\u5206\u949f"]}),Object(C.jsxs)("div",{className:"count-list",children:[Object(C.jsxs)("div",{className:"count-item",onClick:function(){return c.push("/profile/activity")},children:[Object(C.jsx)("p",{children:j}),Object(C.jsx)("p",{children:"\u52a8\u6001"})]}),Object(C.jsxs)("div",{className:"count-item",onClick:function(){return c.push("/profile/fans?type=followings")},children:[Object(C.jsx)("p",{children:o}),Object(C.jsx)("p",{children:"\u5173\u6ce8"})]}),Object(C.jsxs)("div",{className:"count-item",onClick:function(){return c.push("/profile/fans?type=followers")},children:[Object(C.jsx)("p",{children:u}),Object(C.jsx)("p",{children:"\u7c89\u4e1d"})]}),Object(C.jsxs)("div",{className:"count-item",children:[Object(C.jsx)("p",{children:i}),Object(C.jsx)("p",{children:"\u88ab\u8d5e"})]})]}),Object(C.jsxs)("div",{className:"user-links",children:[Object(C.jsxs)("div",{className:"link-item",onClick:function(){return c.push("/profile/notification")},children:[Object(C.jsx)(fe,{type:"iconbtn_mymessages"}),Object(C.jsx)("div",{children:"\u6d88\u606f\u901a\u77e5"})]}),Object(C.jsxs)("div",{className:"link-item",onClick:function(){return c.push("/profile/article?type=1")},children:[Object(C.jsx)(fe,{type:"iconbtn_mycollect"}),Object(C.jsx)("div",{children:"\u6536\u85cf"})]}),Object(C.jsxs)("div",{className:"link-item",onClick:function(){return c.push("/profile/article?type=2")},children:[Object(C.jsx)(fe,{type:"iconbtn_history1"}),Object(C.jsx)("div",{children:"\u6d4f\u89c8\u5386\u53f2"})]}),Object(C.jsxs)("div",{className:"link-item",onClick:function(){return c.push("/profile/article?type=3")},children:[Object(C.jsx)(fe,{type:"iconbtn_myworks"}),Object(C.jsx)("div",{children:"\u6211\u7684\u4f5c\u54c1"})]})]})]}),Object(C.jsxs)("div",{className:"more-service",children:[Object(C.jsx)("h3",{children:"\u66f4\u591a\u670d\u52a1"}),Object(C.jsxs)("div",{className:"service-list",children:[Object(C.jsxs)("div",{className:"service-item",onClick:function(){return c.push("/profile/feedback")},children:[Object(C.jsx)(fe,{type:"iconbtn_feedback"}),Object(C.jsx)("div",{children:"\u7528\u6237\u53cd\u9988"})]}),Object(C.jsxs)("div",{className:"service-item",onClick:function(){return c.push("/chat")},children:[Object(C.jsx)(fe,{type:"iconbtn_xiaozhitongxue"}),Object(C.jsx)("div",{children:"\u5c0f\u667a\u540c\u5b66"})]})]})]})]})})),Qe=[{path:"/home/index",icon:"iconbtn_home",text:"\u9996\u9875"},{path:"/home/question",icon:"iconbtn_qa",text:"\u95ee\u7b54"},{path:"/home/video",icon:"iconbtn_video",text:"\u89c6\u9891"},{path:"/home/profile",icon:"iconbtn_mine",text:"\u6211\u7684"}],Ze=function(){var e=Object(l.g)(),t=Object(l.h)();return Object(C.jsxs)("div",{className:he.a.root,children:[Object(C.jsx)(ve,{exact:!0,path:"/home/index",children:Object(C.jsx)(Pe,{})}),Object(C.jsx)(l.b,{path:"/home/question",children:Object(C.jsx)(Je,{})}),Object(C.jsx)(l.b,{path:"/home/video",children:Object(C.jsx)(He,{})}),Object(C.jsx)(I,{path:"/home/profile",children:Object(C.jsx)(Ve,{})}),Object(C.jsx)(M.m,{className:"tab-bar",activeKey:t.pathname,onChange:function(t){return n=t,void e.push(n);var n},children:Qe.map((function(e){return Object(C.jsx)(M.m.Item,{icon:function(t){return Object(C.jsx)(fe,{type:t?"".concat(e.icon,"_sel"):e.icon,className:"tab-bar-item-icon"})},title:e.text},e.path)}))})]})},$e=n(25),et=n(222),tt=n.n(et),nt=n(223),ct=n.n(nt),rt=function(e){var t=e.onUpdateGender,n=e.onClose,c=e.items;return Object(C.jsxs)("div",{className:ct.a.root,children:[c.map((function(e){return Object(C.jsx)("div",{className:"list-item",onClick:function(){return t(e.value)},children:e.text},e.value)})),Object(C.jsx)("div",{className:"list-item",onClick:n,children:"\u53d6\u6d88"})]})},at=n(224),st=n.n(at),it=function(e){var t=e.config,n=e.onUpdate,c=e.onClose,r=Object(k.useState)(t.value||""),a=Object(L.a)(r,2),s=a[0],i=a[1];Object(k.useEffect)((function(){void 0!==t.value&&i(t.value)}),[t.value]);return Object(C.jsxs)("div",{className:st.a.root,children:[Object(C.jsxs)(M.i,{onBack:c,className:"navbar",right:Object(C.jsx)("span",{className:"commit-btn",onClick:function(){if(""===s.trim())return M.p.show("\u6635\u79f0\u4e0d\u80fd\u4e3a\u7a7a");n("\u6635\u79f0"===t.text?"name":"intro",s)},children:"\u63d0\u4ea4"}),children:["\u7f16\u8f91",t.text]}),Object(C.jsxs)("div",{className:"edit-input-content",children:[Object(C.jsx)("h3",{children:t.text}),"\u6635\u79f0"===t.text?Object(C.jsx)("div",{className:"input-wrap",children:Object(C.jsx)(M.g,{value:s,onChange:function(e){i(e)},placeholder:"\u8bf7\u8f93\u5165",maxLength:20})}):Object(C.jsx)(M.o,{className:"textarea",placeholder:"\u8bf7\u8f93\u5165",showCount:!0,maxLength:99,value:s,onChange:function(e){return i(e)}})]})]})},ot=M.h.Item,lt=M.c.show,ut=[{text:"\u62cd\u7167",value:"picture"},{text:"\u672c\u5730\u9009\u62e9",value:"local"}],jt=[{text:"\u7537",value:0},{text:"\u5973",value:1}],dt=function(){var e=Object(l.g)(),t=Object(a.c)(),n=Object(k.useRef)(null),c=Object(a.d)((function(e){return e.profile})).userInfo,r=Object(k.useState)(!1),s=Object(L.a)(r,2),i=s[0],o=s[1],u=Object(k.useState)({open:!1,type:"photo"}),p=Object(L.a)(u,2),b=p[0],h=p[1],f=Object(k.useState)({open:!1,type:"name"}),m=Object(L.a)(f,2),x=m[0],v=m[1];Object(k.useEffect)((function(){try{t(function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/user/profile");case 2:n=e.sent,t({type:"profile/getUserInfo",payload:n.data.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(e){}}),[t]);var g=function(){var e=Object(d.a)(j.a.mark((function e(n){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c=n.target.files[0],(r=new FormData).append("photo",c),t(W(r))}catch(a){}finally{E()}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){h({open:!0,type:e})},w=function(e){v({open:!0,type:e})},S=function(){var e=Object(d.a)(j.a.mark((function e(n,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(J(Object($e.a)({},n,c))),T(),E()}catch(r){}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(j.a.mark((function e(n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=ke()(n).format("YYYY-MM-DD");try{t(J({birthday:c})),o(!1)}catch(r){}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){v(Object(_.a)(Object(_.a)({},x),{},{open:!1}))},E=function(){h(Object(_.a)(Object(_.a)({},b),{},{open:!1}))},A=c.photo,R=c.name,F=c.intro,U=c.gender,q=c.birthday,z={text:"\u6635\u79f0",value:R},B={text:"\u7b80\u4ecb",value:null!==F&&void 0!==F?F:""};return Object(C.jsxs)("div",{className:tt.a.root,children:[Object(C.jsxs)("div",{className:"content",children:[Object(C.jsx)(M.i,{style:{"--border-bottom":"1px solid #F0F0F0"},onBack:function(){return e.go(-1)},children:"\u4e2a\u4eba\u4fe1\u606f"}),Object(C.jsxs)("div",{className:"wrapper",children:[Object(C.jsxs)(M.h,{className:"profile-list",children:[Object(C.jsx)(ot,{extra:Object(C.jsx)("span",{className:"avatar-wrapper",children:Object(C.jsx)("img",{width:24,height:24,src:A||"http://toutiao.itheima.net/images/user_head.jpg",alt:""})}),onClick:function(){return N("photo")},children:"\u5934\u50cf"}),Object(C.jsx)(ot,{arrow:!0,extra:R,onClick:function(){return w("name")},children:"\u6635\u79f0"}),Object(C.jsx)(ot,{arrow:!0,extra:Object(C.jsx)("span",{className:P()("intro text-overflow",F&&"normal"),children:F||"\u672a\u586b\u5199"}),onClick:function(){return w("intro")},children:"\u7b80\u4ecb"})]}),Object(C.jsxs)(M.h,{className:"profile-list",children:[Object(C.jsx)(ot,{arrow:!0,extra:0===U?"\u7537":"\u5973",onClick:function(){return N("gender")},children:"\u6027\u522b"}),Object(C.jsx)(ot,{onClick:function(){o(!0)},extra:q,children:"\u751f\u65e5"})]}),Object(C.jsx)(M.b,{visible:i,value:new Date(q),onClose:function(){return o(!1)},onConfirm:I,title:"\u9009\u62e9\u5e74\u6708\u65e5",min:new Date(1900,0,1,0,0,0),max:new Date}),Object(C.jsx)("input",{type:"file",hidden:!0,ref:n,onChange:g})]}),Object(C.jsx)("div",{className:"logout",children:Object(C.jsx)("button",{className:"btn",onClick:function(){lt({title:"\u6e29\u99a8\u63d0\u793a",content:"\u4f60\u786e\u5b9a\u9000\u51fa\u5417\uff1f",closeOnMaskClick:!0,closeOnAction:!0,actions:[[{key:"cancel",text:"\u53d6\u6d88"},{key:"confirm",text:"\u786e\u8ba4",style:{color:"#fc6627"},onClick:function(){O(),e.push("/login")}}]]})},children:"\u9000\u51fa\u767b\u5f55"})})]}),Object(C.jsx)(M.j,{visible:b.open,onMaskClick:E,position:"bottom",children:Object(C.jsx)(rt,{items:"photo"===b.type?ut:jt,onClose:E,onUpdateGender:"photo"===b.type?function(){var e;null===(e=n.current)||void 0===e||e.click()}:function(e){return S("gender",e)}})}),Object(C.jsx)(M.j,{visible:x.open,onMaskClick:T,position:"right",children:Object(C.jsx)(it,{config:"name"===x.type?z:B,onUpdate:S,onClose:T})})]})},pt=n(705),bt=n(225),ht=n.n(bt),ft="geek-h5-search_pip__",mt=function(){var e=Object(a.c)(),t=Object(l.g)(),n=Object(l.h)(),c=Object(k.useState)(""),r=Object(L.a)(c,2),s=r[0],i=r[1],o=Object(k.useState)([]),u=Object(L.a)(o,2),p=u[0],b=u[1],h=Object(a.d)((function(e){return e.search})).suggestion;Object(k.useEffect)((function(){var e=JSON.parse(localStorage.getItem(ft)||"[]");e.length>0&&b(e)}),[n]),Object(k.useEffect)((function(){return function(){e({type:"search/resetSuggestion"})}}),[e]);var f=Object(pt.a)((function(t){var n;e((n=t,function(){var e=Object(d.a)(j.a.mark((function e(t){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/suggestion",{params:{q:n}});case 2:c=e.sent,null===(r=c.data.data.options)[0]&&(r=[]),t({type:"search/getSuggestion",payload:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),{wait:500}).run,m=function(e){t.replace("/search/result?q=".concat(e)),x(e)},O=function(){t.replace("/search/result?q=".concat(s)),x(s)},x=function(e){var t=JSON.parse(localStorage.getItem(ft)||"[]");if(0===t.length)t.unshift(e);else if(t.includes(e)){var n=t.filter((function(t){return t!==e}));t=[e].concat(Object(V.a)(n))}else t.unshift(e);localStorage.setItem(ft,JSON.stringify(t))},v=h.map((function(e){var t=e.indexOf(s),n=e.slice(0,t),c=e.slice(t+1);return{left:n,searchText:s,right:c}}));return Object(C.jsxs)("div",{className:ht.a.root,children:[Object(C.jsx)(M.i,{className:"navbar",onBack:function(){t.go(-1),e({type:"search/resetSuggestion"})},right:Object(C.jsx)("span",{className:"search-text",onClick:O,children:"\u641c\u7d22"}),children:Object(C.jsx)(M.l,{placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22",value:s,onChange:function(t){if(i(t),!t)return e({type:"search/resetSuggestion"});f(t)},onSearch:O,onClear:function(){i(""),e({type:"search/resetSuggestion"})}})}),p.length>0&&Object(C.jsxs)("div",{className:"history",style:{display:h.length>0?"none":"block"},children:[Object(C.jsxs)("div",{className:"history-header",children:[Object(C.jsx)("span",{children:"\u641c\u7d22\u5386\u53f2"}),Object(C.jsxs)("span",{onClick:function(){localStorage.removeItem(ft),b([])},children:[Object(C.jsx)(fe,{type:"iconbtn_del"}),"\u6e05\u9664\u5168\u90e8"]})]}),Object(C.jsx)("div",{className:"history-list",children:p.map((function(e,t){return Object(C.jsxs)("span",{className:"history-item",onClick:function(){return m(e)},children:[e,Object(C.jsx)("span",{className:"divider"})]},t)}))})]}),Object(C.jsx)("div",{className:P()("search-result",h.length>0?"show":""),children:v.map((function(e,t){return Object(C.jsxs)("div",{className:"result-item",onClick:function(){return m(e.left+e.searchText+e.right)},children:[Object(C.jsx)(fe,{className:"icon-search",type:"iconbtn_search"}),Object(C.jsxs)("div",{className:"result-value",children:[e.left,Object(C.jsx)("span",{children:e.searchText}),e.right]})]},t)}))})]})},Ot=n(227),xt=n.n(Ot),vt=function(){var e,t=Object(l.g)(),n=Object(l.h)(),c=Object(a.c)(),r=Object(a.d)((function(e){return e.search})).searchResult,s=null!==(e=new URLSearchParams(n.search).get("q"))&&void 0!==e?e:"";Object(k.useEffect)((function(){c(function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.get("/search",{params:{q:e}});case 2:c=t.sent,n({type:"search/getSearchResult",payload:c.data.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(s))}),[c,s]);var i=r.results;return Object(C.jsxs)("div",{className:xt.a.root,children:[Object(C.jsx)(M.i,{onBack:function(){return t.replace("/search",{isFromResult:!0})},children:"\u641c\u7d22\u7ed3\u679c"}),Object(C.jsx)("div",{className:"article-list",children:null===i||void 0===i?void 0:i.map((function(e,n){var c=e.aut_name,r=e.comm_count,a=e.pubdate,s=e.title,i=e.art_id,o=e.cover,l={type:o.type,title:s,aut_name:c,comm_count:r,pubdate:a,images:o.images};return Object(C.jsx)("div",{onClick:function(){return function(e){t.push("/article/".concat(e))}(i)},children:Object(C.jsx)(Le,Object(_.a)({},l))},n)}))})]})},gt=n(228),yt=n.n(gt),_t=n(106),Nt=n.n(_t),kt=(n(673),n(237)),wt=n(66),Ct=n.n(wt),St=n(229),It=n.n(St),Tt=function(e){var t=e.root,n=e.height,c=e.offset,r=void 0===c?0:c,a=e.children,s=Object(k.useRef)(null),i=Object(k.useRef)(null);return Object(k.useEffect)((function(){if(t){var e=s.current,c=i.current,a=Ct()((function(){e.getBoundingClientRect().top<=r?(c.style.position="fixed",c.style.top="".concat(r,"px"),e.style.height="".concat(n,"px")):(c.style.position="static",e.style.height="0px")}),100);return t.addEventListener("scroll",a),function(){t.removeEventListener("scroll",a)}}}),[t,r,n]),Object(C.jsxs)("div",{className:It.a.root,children:[Object(C.jsx)("div",{ref:s,className:"sticky-placeholder"}),Object(C.jsx)("div",{className:"sticky-container",ref:i,children:a})]})},Et=n(230),At=n.n(Et),Rt=n.p+"static/media/none.78b85fdc.png",Lt=function(){return Object(C.jsxs)("div",{className:At.a.root,children:[Object(C.jsx)("img",{src:Rt,alt:""}),Object(C.jsx)("p",{className:"no-comment",children:"\u8fd8\u6ca1\u6709\u4eba\u8bc4\u8bba\u54e6"})]})},Mt=n(231),Ft=n.n(Mt),Ut=function(e){var t=e.aut_photo,n=e.aut_name,c=e.like_count,r=e.is_followed,a=e.is_liking,s=e.content,i=e.reply_count,o=e.pubdate,l=e.onThumbsUp,u=e.onOpenReply,j=void 0===u?function(){}:u,d=e.onFollow,p=e.type,b=void 0===p?"normal":p,h="normal"===b?Object(C.jsxs)("span",{className:"replay",onClick:j,children:[0===i?"":i,"\u56de\u590d",Object(C.jsx)(fe,{type:"iconbtn_right"})]}):null;return Object(C.jsxs)("div",{className:Ft.a.root,children:[Object(C.jsx)("div",{className:"avatar",children:Object(C.jsx)("img",{src:t,alt:""})}),Object(C.jsxs)("div",{className:"comment-info",children:[Object(C.jsxs)("div",{className:"comment-info-header",children:[Object(C.jsx)("span",{className:"name",children:n}),("normal"===b||"reply"===b)&&Object(C.jsxs)("span",{className:"thumbs-up",onClick:l,children:[c,Object(C.jsx)(fe,{type:a?"iconbtn_like_sel":"iconbtn_like2"})]}),"origin"===b&&Object(C.jsx)("span",{onClick:d,className:P()("follow",r?"followed":""),children:r?"\u5df2\u5173\u6ce8":"\u5173\u6ce8"})]}),Object(C.jsx)("div",{className:"comment-content",children:s}),Object(C.jsxs)("div",{className:"comment-footer",children:[h,"reply"!==b&&Object(C.jsx)("span",{className:"comment-time",children:ke()().from(o)}),"origin"===b&&Object(C.jsxs)("span",{className:"thumbs-up",onClick:l,children:[c,Object(C.jsx)(fe,{type:a?"iconbtn_like_sel":"iconbtn_like2"})]})]})]})]})},qt=n(232),zt=n.n(qt),Pt=function(e){var t=e.name,n=e.onClose,c=e.onComment,r=Object(k.useState)(""),a=Object(L.a)(r,2),s=a[0],i=a[1],o=Object(k.useRef)(null);Object(k.useEffect)((function(){setTimeout((function(){var e;null===(e=o.current)||void 0===e||e.focus()}),600)}),[]);return Object(C.jsxs)("div",{className:zt.a.root,children:[Object(C.jsx)(M.i,{onBack:n,right:Object(C.jsx)("span",{className:"publish",onClick:function(){return c(s)},children:"\u53d1\u8868"}),children:t?"\u56de\u590d\u8bc4\u8bba":"\u8bc4\u8bba\u6587\u7ae0"}),Object(C.jsxs)("div",{className:"input-area",children:[t&&Object(C.jsxs)("div",{className:"at",children:["@",t,":"]}),Object(C.jsx)(M.o,{ref:o,placeholder:"\u8bf4\u70b9\u4ec0\u4e48~",rows:10,value:s,onChange:function(e){i(e)}})]})]})},Bt=n(233),Dt=n.n(Bt),Jt=function(e){var t=e.comm_count,n=e.attitude,c=e.is_collected,r=e.placeholder,a=e.onComment,s=e.onLike,i=e.onCollected,o=e.onShare,l=e.onShowComment,u=e.type,j=void 0===u?"normal":u;return Object(C.jsxs)("div",{className:Dt.a.root,children:[Object(C.jsxs)("div",{className:"input-btn",onClick:a,children:[Object(C.jsx)(fe,{type:"iconbianji"}),Object(C.jsx)("span",{children:r})]}),"normal"===j&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"action-item",onClick:l,children:[Object(C.jsx)(fe,{type:"iconbtn_comment"}),Object(C.jsx)("p",{children:"\u8bc4\u8bba"}),!!t&&Object(C.jsx)("span",{className:"bage",children:t})]}),Object(C.jsxs)("div",{className:"action-item",onClick:s,children:[Object(C.jsx)(fe,{type:1===n?"iconbtn_like_sel":"iconbtn_like2"}),Object(C.jsx)("p",{children:"\u70b9\u8d5e"})]}),Object(C.jsxs)("div",{className:"action-item",onClick:i,children:[Object(C.jsx)(fe,{type:c?"iconbtn_collect_sel":"iconbtn_collect"}),Object(C.jsx)("p",{children:"\u6536\u85cf"})]})]}),"reply"===j&&Object(C.jsxs)("div",{className:"action-item",onClick:s,children:[Object(C.jsx)(fe,{type:1===n?"iconbtn_like_sel":"iconbtn_like2"}),Object(C.jsx)("p",{children:"\u70b9\u8d5e"})]}),Object(C.jsxs)("div",{className:"action-item",onClick:o,children:[Object(C.jsx)(fe,{type:"iconbtn_share"}),Object(C.jsx)("p",{children:"\u5206\u4eab"})]})]})},Wt=n(234),Yt=n.n(Wt),Ht=function(e){var t=e.data,n=e.art_id,c=e.onClose,r=e.onReplyThumbsUp,s=Object(k.useState)(t),i=Object(L.a)(s,2),o=i[0],l=i[1],u=o.com_id,p=o.aut_name,b=o.is_liking,h=o.like_count,f=o.aut_id,m=o.is_followed,O=Object(k.useState)({visible:!1,id:u}),x=Object(L.a)(O,2),v=x[0],g=x[1],N=Object(k.useState)({}),w=Object(L.a)(N,2),S=w[0],I=w[1],T=Object(a.c)();Object(k.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/comments",{params:{type:"c",source:u}});case 2:t=e.sent,I(t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u]);var E=function(){g(Object(_.a)(Object(_.a)({},v),{},{visible:!1}))},A=function(){var e=Object(d.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.post("/comments",{target:u,content:t,art_id:n});case 2:c=e.sent,I(Object(_.a)(Object(_.a)({},S),{},{total_count:S.total_count+1,results:[c.data.data.new_obj].concat(Object(V.a)(S.results))})),E();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,y.delete("/comment/likings/".concat(t));case 3:e.next=7;break;case 5:return e.next=7,y.post("/comment/likings",{target:t});case 7:c=n?-1:1,I(Object(_.a)(Object(_.a)({},S),{},{results:S.results.map((function(e){return e.com_id===t?Object(_.a)(Object(_.a)({},e),{},{is_liking:!n,like_count:e.like_count+c}):e}))}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){r(u,b);var e=b?-1:1;l(Object(_.a)(Object(_.a)({},o),{},{is_liking:!b,like_count:h+e}))},U=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(se(f,m));case 3:M.p.show(m?"\u53d6\u6d88\u5173\u6ce8":"\u5df2\u5173\u6ce8"),l(Object(_.a)(Object(_.a)({},o),{},{is_followed:!m})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c=e.t0,M.p.show({content:null===(t=c.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,duration:1e3});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),q=S.results,z=S.total_count;return Object(C.jsxs)("div",{className:Yt.a.root,children:[Object(C.jsxs)("div",{className:"reply-wrapper",children:[Object(C.jsxs)(M.i,{className:"transparent-navbar",onBack:function(){c(o.com_id,S.total_count)},children:[z,"\u6761\u56de\u590d"]}),Object(C.jsx)("div",{className:"origin-comment",children:Object(C.jsx)(Ut,Object(_.a)(Object(_.a)({type:"origin"},o),{},{onFollow:U,onThumbsUp:F}))}),Object(C.jsxs)("div",{className:"reply-list",children:[Object(C.jsx)("div",{className:"reply-header",children:"\u5168\u90e8\u56de\u590d"}),(null===q||void 0===q?void 0:q.length)>0?q.map((function(e){return Object(C.jsx)(Ut,Object(_.a)(Object(_.a)({type:"reply"},e),{},{onThumbsUp:function(){return R(e.com_id,e.is_liking)}}),e.com_id)})):Object(C.jsx)(Lt,{})]}),Object(C.jsx)(Jt,{placeholder:"\u53bb\u8bc4\u8bba",type:"reply",onComment:function(){g({visible:!0,id:u})},attitude:b?1:0,onLike:F})]}),Object(C.jsx)(M.j,{className:"drawer",position:"bottom",visible:v.visible,onMaskClick:E,children:Object(C.jsx)("div",{className:"drawer-sidebar-wrapper",children:v.visible&&Object(C.jsx)(Pt,{name:p,onClose:E,onComment:A})})})]})},Kt=n(235),Gt=n.n(Kt),Xt=function(e){var t=e.onClose;return Object(C.jsxs)("div",{className:Gt.a.root,children:[Object(C.jsx)("div",{className:"share-header",children:"\u7acb\u5373\u5206\u4eab\u7ed9\u597d\u53cb"}),Object(C.jsxs)("div",{className:"share-list",children:[Object(C.jsxs)("div",{className:"share-item",children:[Object(C.jsx)("img",{src:"https://img01.yzcdn.cn/vant/share-sheet-wechat.png",alt:""}),Object(C.jsx)("span",{children:"\u5fae\u4fe1"})]}),Object(C.jsxs)("div",{className:"share-item",children:[Object(C.jsx)("img",{src:"https://img01.yzcdn.cn/vant/share-sheet-wechat-moments.png",alt:""}),Object(C.jsx)("span",{children:"\u670b\u53cb\u5708"})]}),Object(C.jsxs)("div",{className:"share-item",children:[Object(C.jsx)("img",{src:"https://img01.yzcdn.cn/vant/share-sheet-weibo.png",alt:""}),Object(C.jsx)("span",{children:"\u5fae\u535a"})]}),Object(C.jsxs)("div",{className:"share-item",children:[Object(C.jsx)("img",{src:"https://img01.yzcdn.cn/vant/share-sheet-qq.png",alt:""}),Object(C.jsx)("span",{children:"QQ"})]})]}),Object(C.jsxs)("div",{className:"share-list",children:[Object(C.jsxs)("div",{className:"share-item",children:[Object(C.jsx)("img",{src:"https://img01.yzcdn.cn/vant/share-sheet-link.png",alt:""}),Object(C.jsx)("span",{children:"\u590d\u5236\u94fe\u63a5"})]}),Object(C.jsxs)("div",{className:"share-item",children:[Object(C.jsx)("img",{src:"https://img01.yzcdn.cn/vant/share-sheet-poster.png",alt:""}),Object(C.jsx)("span",{children:"\u5206\u4eab\u6d77\u62a5"})]}),Object(C.jsxs)("div",{className:"share-item",children:[Object(C.jsx)("img",{src:"https://img01.yzcdn.cn/vant/share-sheet-qrcode.png",alt:""}),Object(C.jsx)("span",{children:"\u4e8c\u7ef4\u7801"})]}),Object(C.jsxs)("div",{className:"share-item",children:[Object(C.jsx)("img",{src:"https://img01.yzcdn.cn/vant/share-sheet-weapp-qrcode.png",alt:""}),Object(C.jsx)("span",{children:"\u5c0f\u7a0b\u5e8f\u7801"})]})]}),Object(C.jsx)("div",{className:"share-cancel",onClick:t,children:"\u53d6\u6d88"})]})},Vt=n(236),Qt=n.n(Vt);!function(e){e.Article="a",e.Comment="c"}(Re||(Re={}));var Zt=function(){var e=Object(a.c)(),t=Object(l.g)(),n=Object(k.useState)(!1),c=Object(L.a)(n,2),r=c[0],s=c[1],i=Object(k.useState)({visible:!1,data:{}}),o=Object(L.a)(i,2),u=o[0],p=o[1],b=Object(k.useState)(!1),h=Object(L.a)(b,2),f=h[0],m=h[1],O=Object(k.useState)(!0),x=Object(L.a)(O,2),v=x[0],g=x[1],N=Object(k.useState)(!1),w=Object(L.a)(N,2),S=w[0],I=w[1],T=Object(k.useRef)(null),E=Object(k.useRef)(null),A=Object(k.useRef)(null),R=Object(k.useRef)(!1),F=Object(k.useRef)(!1),U=Object(a.d)((function(e){return e.article})),q=U.info,z=U.comment,B=Object(l.i)().id;Object(k.useEffect)((function(){(function(){var t=Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(re(B));case 2:g(!1);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,B]),Object(k.useEffect)((function(){e(function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.get("/comments",{params:{type:e,source:t}});case 2:r=n.sent,c({type:"article/getArticleComment",payload:r.data.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(Re.Article,B))}),[e,B]),Object(k.useEffect)((function(){if(!v){var e=document.querySelector(".dg-html"),t=e.querySelectorAll("pre code");if(Nt.a.configure({ignoreUnescapedHTML:!0}),t.length>0)t.forEach((function(e){var t=e;Nt.a.highlightElement(t)}));else{var n=e.querySelectorAll("pre");n.length>0&&n.forEach((function(e){Nt.a.highlightElement(e)}))}}}),[v]),Object(k.useEffect)((function(){if(!v){var e=E.current,t=Ct()((function(){var e=T.current.getBoundingClientRect().bottom;I(e-44<=0)}),200);return e.addEventListener("scroll",t),function(){return e.removeEventListener("scroll",t)}}}),[v]);var D=function(t,n){e(function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(c){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c({type:"article/updateCommentCount",payload:{commentId:e,total:t}});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n)),J()},J=function(){p(Object(_.a)(Object(_.a)({},u),{},{visible:!1}))},W=function(){s(!1)},Y=function(){var t=Object(d.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=z.last_id,!F.current){t.next=3;break}return t.abrupt("return");case 3:return F.current=!0,t.next=6,e(ae(Re.Article,B,n));case 6:F.current=!1;case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),H=function(){var t=Object(d.a)(j.a.mark((function t(){var n,c,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(se(q.aut_id,q.is_followed));case 3:M.p.show(q.is_followed?"\u53d6\u6d88\u5173\u6ce8":"\u5df2\u5173\u6ce8"),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),r=t.t0,M.p.show({content:null===(n=r.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message,duration:1e3});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),K=function(){var t=Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(ie(q.art_id,q.is_collected));case 2:M.p.show(q.is_collected?"\u53d6\u6d88\u6536\u85cf":"\u5df2\u6536\u85cf");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(){var t=Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(oe(q.art_id,q.attitude));case 2:M.p.show(q.attitude?"\u53d6\u6d88\u70b9\u8d5e":"\u5df2\u70b9\u8d5e");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(le(q.art_id,n));case 2:W();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(d.a)(j.a.mark((function t(n,c){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(ue(n,c));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Q=q.art_id,Z=q.attitude,$=q.aut_name,ee=q.aut_photo,te=q.comm_count,ne=q.content,ce=q.is_collected,je=q.is_followed,de=q.like_count,pe=q.pubdate,be=q.read_count,he=q.title,me=z.results,Oe=z.end_id,xe=z.last_id,ve=Math.max(te,me.length),ge=Oe!==xe,ye=ke()(pe).format("YYYY-MM-DD");return Object(C.jsxs)("div",{className:Qt.a.root,children:[Object(C.jsxs)("div",{className:"root-wrapper",children:[Object(C.jsx)(M.i,{onBack:function(){return t.go(-1)},right:Object(C.jsx)("span",{onClick:function(){return m(!0)},children:Object(C.jsx)(fe,{type:"icongengduo"})}),children:S&&Object(C.jsxs)("div",{className:"nav-author",children:[Object(C.jsx)("img",{src:ee,alt:""}),Object(C.jsx)("span",{className:"name",children:$}),Object(C.jsx)("span",{onClick:H,className:P()("follow",je?"followed":""),children:je?"\u5df2\u5173\u6ce8":"\u5173\u6ce8"})]})}),v?Object(C.jsxs)(kt.a,{speed:2,width:375,height:230,viewBox:"0 0 375 230",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(C.jsx)("rect",{x:"16",y:"8",rx:"3",ry:"3",width:"340",height:"10"}),Object(C.jsx)("rect",{x:"16",y:"26",rx:"0",ry:"0",width:"70",height:"6"}),Object(C.jsx)("rect",{x:"96",y:"26",rx:"0",ry:"0",width:"50",height:"6"}),Object(C.jsx)("rect",{x:"156",y:"26",rx:"0",ry:"0",width:"50",height:"6"}),Object(C.jsx)("circle",{cx:"33",cy:"69",r:"17"}),Object(C.jsx)("rect",{x:"60",y:"65",rx:"0",ry:"0",width:"45",height:"6"}),Object(C.jsx)("rect",{x:"304",y:"65",rx:"0",ry:"0",width:"52",height:"6"}),Object(C.jsx)("rect",{x:"16",y:"114",rx:"0",ry:"0",width:"340",height:"15"}),Object(C.jsx)("rect",{x:"263",y:"208",rx:"0",ry:"0",width:"94",height:"19"}),Object(C.jsx)("rect",{x:"16",y:"141",rx:"0",ry:"0",width:"340",height:"15"}),Object(C.jsx)("rect",{x:"16",y:"166",rx:"0",ry:"0",width:"340",height:"15"})]}):Object(C.jsxs)("div",{className:"wrapper",ref:E,children:[Object(C.jsxs)("div",{className:"article-wrapper",children:[Object(C.jsxs)("div",{className:"header",children:[Object(C.jsx)("h1",{className:"title",children:he}),Object(C.jsxs)("div",{className:"info",children:[Object(C.jsx)("span",{children:ye}),Object(C.jsxs)("span",{children:[be," \u9605\u8bfb"]}),Object(C.jsxs)("span",{children:[ve," \u8bc4\u8bba"]})]}),Object(C.jsxs)("div",{className:"author",ref:T,children:[Object(C.jsx)("img",{src:ee,alt:""}),Object(C.jsx)("span",{className:"name",children:$}),Object(C.jsx)("span",{className:P()("follow",je?"followed":""),onClick:H,children:je?"\u5df2\u5173\u6ce8":"\u5173\u6ce8"})]})]}),Object(C.jsxs)("div",{className:"content",children:[Object(C.jsx)("div",{className:"content-html dg-html",dangerouslySetInnerHTML:{__html:yt.a.sanitize(ne)}}),Object(C.jsxs)("div",{className:"date",children:["\u53d1\u5e03\u6587\u7ae0\u65f6\u95f4\uff1a",ye]})]})]}),Object(C.jsxs)("div",{className:"comment",ref:A,children:[Object(C.jsx)(Tt,{root:E.current,height:51,offset:44,children:Object(C.jsxs)("div",{className:"comment-header",children:[Object(C.jsxs)("span",{children:["\u5168\u90e8\u8bc4\u8bba\uff08",ve,"\uff09"]}),Object(C.jsxs)("span",{children:[de," \u70b9\u8d5e"]})]})}),0===ve?Object(C.jsx)(Lt,{}):Object(C.jsxs)("div",{className:"comment-list",children:[me.map((function(e){return Object(C.jsx)(Ut,Object(_.a)(Object(_.a)({},e),{},{onOpenReply:function(){p({visible:!0,data:e})},onThumbsUp:function(){return V(e.com_id,e.is_liking)}}),e.com_id)})),Object(C.jsx)(M.f,{hasMore:ge,loadMore:Y})]})]})]}),Object(C.jsx)(Jt,{comm_count:ve,placeholder:0===ve?"\u62a2\u6c99\u53d1":"\u53bb\u8bc4\u8bba",attitude:Z,is_collected:ce,onShare:function(){return m(!0)},onComment:function(){return s(!0)},onLike:G,onCollected:K,onShowComment:function(){var e=E.current,t=A.current.getBoundingClientRect().top;R.current?(e.scrollTo(0,0),R.current=!1):(e.scrollTo(0,t-44+e.scrollTop),R.current=!0)}})]}),Object(C.jsx)(M.j,{className:"comment-popup",position:"bottom",visible:r,onMaskClick:W,children:Object(C.jsx)("div",{className:"comment-popup-wrapper",children:r&&Object(C.jsx)(Pt,{onClose:W,onComment:X})})}),Object(C.jsx)(M.j,{className:"reply-popup",position:"right",visible:u.visible,onMaskClick:J,forceRender:!0,children:Object(C.jsx)("div",{className:"reply-popup-wrapper",children:u.visible&&Object(C.jsx)(Ht,{data:u.data,art_id:Q,onClose:D,onReplyThumbsUp:V})})}),Object(C.jsx)(M.j,{position:"bottom",visible:f,onMaskClick:function(){return m(!1)},children:Object(C.jsx)(Xt,{onClose:function(){return m(!1)}})})]})},$t=n(238),en=n.n($t),tn=n(239),nn=n.n(tn),cn=function(){var e=Object(l.g)(),t=Object(k.useState)(""),n=Object(L.a)(t,2),c=n[0],r=n[1],a=Object(k.useState)([]),s=Object(L.a)(a,2),i=s[0],o=s[1],u=Object(k.useRef)(),j=Object(k.useRef)(null);Object(k.useEffect)((function(){var e=g.replace("/v1_0",""),t=en()(e,{query:{token:f().token},transports:["websocket"]});t.on("connect",(function(){o([{message:"\u4f60\u597d\uff0c\u6211\u662f\u5c0f\u667a",type:"xz"},{message:"\u4f60\u6709\u4ec0\u4e48\u7591\u95ee\uff1f",type:"xz"}])})),t.on("message",(function(e){o((function(t){return[].concat(Object(V.a)(t),[{message:e.msg,type:"xz"}])}))})),u.current=t}),[]),Object(k.useEffect)((function(){j.current.scrollTop=j.current.scrollHeight}),[i]);return Object(C.jsxs)("div",{className:nn.a.root,children:[Object(C.jsx)(M.i,{className:"fixed-header",onBack:function(){return e.go(-1)},children:"\u5c0f\u667a\u540c\u5b66"}),Object(C.jsx)("div",{className:"chat-list",ref:j,children:i.map((function(e,t){return Object(C.jsxs)("div",{className:P()("chat-item","xz"===e.type?"self":"user"),children:["xz"===e.type?Object(C.jsx)(fe,{type:"iconbtn_xiaozhitongxue"}):Object(C.jsx)("img",{src:"http://geek.itheima.net/images/user_head.jpg",alt:""}),Object(C.jsx)("div",{className:"message",children:e.message})]},t)}))}),Object(C.jsxs)("div",{className:"input-footer",children:[Object(C.jsx)(M.g,{className:"no-border",placeholder:"\u8bf7\u63cf\u8ff0\u60a8\u7684\u95ee\u9898",value:c,onChange:function(e){return r(e)},onKeyDown:function(e){var t;"Enter"===e.code&&""!==c.trim()&&(null===(t=u.current)||void 0===t||t.emit("message",{msg:c,timestamp:+new Date+""}),o([].concat(Object(V.a)(i),[{type:"user",message:c}])),r(""))}}),Object(C.jsx)(fe,{type:"iconbianji"})]})]})},rn=n(240),an=n.n(rn),sn=function(){var e=Object(l.g)();return Object(C.jsxs)("div",{className:an.a.root,children:[Object(C.jsx)(M.i,{onBack:function(){return e.go(-1)},children:"\u610f\u89c1\u53cd\u9988"}),Object(C.jsxs)("div",{className:"wrapper",children:[Object(C.jsxs)("div",{className:"feedback-item",children:[Object(C.jsx)("p",{className:"title",children:"\u7b80\u4ecb"}),Object(C.jsx)("div",{className:"textarea-wrap",children:Object(C.jsx)(M.o,{className:"textarea",placeholder:"\u8bf7\u8f93\u5165",maxLength:100,showCount:!0})}),Object(C.jsx)(M.e,{upload:Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{url:""});case 1:case"end":return e.stop()}}),e)}))),multiple:!0}),Object(C.jsx)("p",{className:"image-picker-desc",children:"\u6700\u591a6\u5f20\uff0c\u5355\u4e2a\u56fe\u7247\u4e0d\u8d85\u8fc720M\u3002"})]}),Object(C.jsxs)("div",{className:"feedback-item",children:[Object(C.jsx)("p",{className:"title",children:"\u8054\u7cfb\u65b9\u5f0f"}),Object(C.jsx)("div",{className:"input-phone",children:Object(C.jsx)(M.g,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801\u4fbf\u4e8e\u8054\u7cfb\uff08\u975e\u5fc5\u586b\uff09"})})]}),Object(C.jsx)("div",{className:"feedback-item feedback-submit",children:Object(C.jsx)("button",{children:"\u63d0\u4ea4\u53cd\u9988"})})]})]})},on=n(241),ln=n.n(on),un=n(242),jn=n.n(un),dn=function(){var e=Object(l.g)(),t=Object(a.c)(),n=Object(a.d)((function(e){return e.profile})).userArticle,c=n.page,r=n.per_page,s=n.total_count,i=n.results;Object(k.useEffect)((function(){0===i.length&&t(Y(1))}),[t,i.length]);var o=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Y(c+1));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=c*r<s;return Object(C.jsx)("div",{className:jn.a.root,children:Object(C.jsxs)("div",{className:"articles",children:[i?i.map((function(t){var n=t.art_id,c=t.aut_name,r=t.comm_count,a=t.cover,s=a.type,i=a.images,o=t.pubdate,l={type:s,title:t.title,aut_name:c,comm_count:r,pubdate:o,images:i,isLogin:!1};return Object(C.jsx)("div",{className:"article-item",onClick:function(){return e.push("/article/".concat(n))},children:Object(C.jsx)(Le,Object(_.a)({},l))},n)})):null,Object(C.jsx)(M.f,{hasMore:u,loadMore:o})]})})},pn=n(243),bn=n.n(pn),hn=function(){return Object(C.jsxs)(M.h,{className:bn.a.root,children:[Object(C.jsx)(M.h.Item,{description:"2021/05/25 16:52:39",children:"\u9ed1\u9a6c\u7a0b\u5e8f\u5458\u62db\u65b0\u5566, \u8bda\u62db\u5404\u8def\u7f16\u7a0b\u9ad8\u624b"}),Object(C.jsx)(M.h.Item,{description:"2021/1/25 16:52:39",children:"\u4f20\u667a\u6559\u80b2\u6210\u4e3aA\u80a1\u4e2d\u7b2c\u4e00\u652f\u6210\u529fIPO\u7684\u6559\u80b2\u4ea7\u4e1a\u80a1"}),Object(C.jsx)(M.h.Item,{description:"2021/02/25 08:52:39",children:"web\u524d\u7aef\u5de5\u7a0b\u5e08\u8bad\u7ec3\u8425\u6765\u88ad, \u5c0f\u4f19\u4f34\u4eec\u8e0a\u8dc3\u62a5\u540d"})]})},fn=n(244),mn=n.n(fn),On=function(){var e=Object(a.c)(),t=Object(a.d)((function(e){return e.profile})).userFigure;return Object(k.useEffect)((function(){e(function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/user/figure");case 2:n=e.sent,t({type:"profile/getUserFigure",payload:n.data.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(C.jsx)("div",{className:mn.a.root,children:Object(C.jsxs)("div",{className:"statics-list",children:[Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("span",{children:"\u7c89\u4e1d\u6570"}),Object(C.jsx)(fe,{className:"right-arrow",type:"iconbtn_right"})]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("span",{children:t.fans_count}),Object(C.jsx)("span",{children:"\u4eba"})]})]}),Object(C.jsxs)("div",{className:"card",children:[Object(C.jsx)("p",{children:Object(C.jsx)("span",{children:"\u9605\u8bfb\u6570"})}),Object(C.jsxs)("p",{children:[Object(C.jsx)("span",{children:t.read_count}),Object(C.jsx)("span",{children:"\u6b21"})]})]})]})})},xn=function(){var e=Object(l.g)();return Object(C.jsxs)("div",{className:ln.a.root,children:[Object(C.jsx)(M.i,{onBack:function(){return e.go(-1)},children:"\u6211\u7684\u52a8\u6001"}),Object(C.jsxs)(M.n,{className:"tabs",children:[Object(C.jsx)(M.n.Tab,{title:"\u4f5c\u54c1",children:Object(C.jsx)(dn,{})},"1"),Object(C.jsx)(M.n.Tab,{title:"\u516c\u544a",children:Object(C.jsx)(hn,{})},"2"),Object(C.jsx)(M.n.Tab,{title:"\u6570\u636e",children:Object(C.jsx)(On,{})},"3")]})]})},vn=n(245),gn=n.n(vn),yn=n(246),_n=n.n(yn),Nn=function(e){var t=e.type,n=Object(a.c)(),c=Object(a.d)((function(e){return e.profile})).userFans[t],r=c.page,s=c.results,i=c.total_count;Object(k.useEffect)((function(){s.length>0||n(H(t,1))}),[n,t,s.length]);var o=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(H(t,1));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=10*r<i;return Object(C.jsxs)(M.h,{className:_n.a.root,children:[s.map((function(e){return Object(C.jsx)(M.h.Item,{children:Object(C.jsxs)("div",{className:"fans-item",children:[Object(C.jsx)("img",{src:e.photo,alt:""}),Object(C.jsxs)("div",{className:"user-info",children:[Object(C.jsx)("span",{children:e.name}),Object(C.jsxs)("span",{className:"count",children:["\u7c89\u4e1d\u6570\uff1a",e.fans_count," \u4eba"]})]}),Object(C.jsx)(M.a,{className:"follow-btn",children:e.mutual_follow?"\u53d6\u6d88\u5173\u6ce8":"\u5173\u6ce8"})]})},e.id)})),Object(C.jsx)(M.f,{hasMore:l,loadMore:o})]})},kn=function(){var e=Object(l.g)(),t=Object(l.h)(),n=new URLSearchParams(t.search).get("type");return Object(C.jsxs)("div",{className:gn.a.root,children:[Object(C.jsx)(M.i,{onBack:function(){return e.go(-1)},children:"\u5173\u6ce8/\u7c89\u4e1d"}),Object(C.jsxs)(M.n,{className:"tabs",defaultActiveKey:n,children:[Object(C.jsx)(M.n.Tab,{title:"\u6211\u7684\u5173\u6ce8",children:Object(C.jsx)(Nn,{type:"followings"})},"followings"),Object(C.jsx)(M.n.Tab,{title:"\u6211\u7684\u7c89\u4e1d",children:Object(C.jsx)(Nn,{type:"followers"})},"followers")]})]})},wn=n(247),Cn=n.n(wn),Sn={1:{title:"\u6211\u7684\u6536\u85cf",path:"/article/collections"},2:{title:"\u9605\u8bfb\u5386\u53f2",path:"/user/histories"},3:{title:"\u6211\u7684\u4f5c\u54c1",path:"/user/articles"}},In=function(){var e=Object(l.h)(),t=new URLSearchParams(e.search).get("type"),n=Object(l.g)(),c=Object(a.c)(),r=Object(a.d)((function(e){return e.profile})).userArticleList,s=Sn[t],i=s.title,o=s.path,u=r[o],p=u.page,b=u.per_page,h=u.total_count,f=u.results;Object(k.useEffect)((function(){0===f.length&&c(K(o,1))}),[c,f.length,o]);var m=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(K(o,p+1));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=p*b<h;return Object(C.jsxs)("div",{className:Cn.a.root,children:[Object(C.jsx)(M.i,{onBack:function(){return n.go(-1)},children:i}),Object(C.jsxs)("div",{className:"articles",children:[f?f.map((function(e){var t=e.art_id,c=e.aut_name,r=e.comm_count,a=e.cover,s=a.type,i=a.images,o=e.pubdate,l={type:s,title:e.title,aut_name:c,comm_count:r,pubdate:o,images:i,isLogin:!1};return Object(C.jsx)("div",{className:"article-item",onClick:function(){return n.push("/article/".concat(t))},children:Object(C.jsx)(Le,Object(_.a)({},l))},t)})):null,Object(C.jsx)(M.f,{hasMore:O,loadMore:m})]})]})},Tn=n(248),En=n.n(Tn),An=n(249),Rn=n.n(An),Ln=n(250),Mn=n.n(Ln),Fn=function(e){var t=e.type,n=e.comment_target,c=e.content,r=e.create_time,a=e.title;return Object(C.jsxs)("div",{className:Mn.a.root,children:[Object(C.jsx)("span",{className:"time",children:r}),Object(C.jsxs)("div",{className:"user",children:[Object(C.jsx)("span",{children:a}),Object(C.jsx)("span",{className:"content",children:c})]}),"fans"!==t&&Object(C.jsx)("p",{className:"comment-target",children:n})]})},Un=function(e){var t=e.type,n=Object(a.c)(),c=Object(a.d)((function(e){return e.profile})).userNotification1[t],r=c.page,s=c.results,i=c.total_count;Object(k.useEffect)((function(){s.length>0||n(X(t,1))}),[n,t,s.length]);var o=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(X(t,r+1));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=10*r<i;return Object(C.jsxs)(M.h,{className:Rn.a.root,children:[s.map((function(e){return Object(C.jsx)(M.h.Item,{children:Object(C.jsx)(Fn,Object(_.a)({type:t},e))},e.id)})),Object(C.jsx)(M.f,{hasMore:l,loadMore:o,children:Object(C.jsxs)("div",{className:"no-data",children:[Object(C.jsx)("img",{src:Rt,alt:""}),Object(C.jsx)("p",{className:"no-comment",children:"\u6682\u65e0\u6570\u636e"})]})})]})},qn=function(){var e=Object(l.g)();return Object(C.jsxs)("div",{className:En.a.root,children:[Object(C.jsx)(M.i,{onBack:function(){return e.go(-1)},children:"\u6d88\u606f\u901a\u77e5"}),Object(C.jsxs)(M.n,{className:"tabs",children:[Object(C.jsx)(M.n.Tab,{title:"\u5168\u90e8",children:Object(C.jsx)(Un,{type:"all"})},"all"),Object(C.jsx)(M.n.Tab,{title:"\u7cfb\u7edf\u901a\u77e5",children:Object(C.jsx)(Un,{type:"system"})},"system"),Object(C.jsx)(M.n.Tab,{title:"\u8bc4\u8bba",children:Object(C.jsx)(Un,{type:"comment"})},"comment"),Object(C.jsx)(M.n.Tab,{title:"\u7c89\u4e1d",children:Object(C.jsx)(Un,{type:"fans"})},"fans"),Object(C.jsx)(M.n.Tab,{title:"\u70b9\u8d5e",children:Object(C.jsx)(Un,{type:"thumbsup"})},"thumbsup")]})]})},zn=function(){var e=Object(l.g)(),t=Object(k.useState)(5),n=Object(L.a)(t,2),c=n[0],r=n[1],a=Object(k.useRef)(-1);return Object(k.useEffect)((function(){return a.current=window.setInterval((function(){console.log("123"),r((function(e){return e-1}))}),1e3),function(){return clearInterval(a.current)}}),[]),Object(k.useEffect)((function(){c<1&&e.replace("/home/index")}),[c,e]),Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"\u5bf9\u4e0d\u8d77\uff0c\u4f60\u8bbf\u95ee\u7684\u5185\u5bb9\u4e0d\u5b58\u5728..."}),Object(C.jsxs)("p",{children:[c," \u79d2\u540e\uff0c\u8fd4\u56de",Object(C.jsx)(Ke.a,{to:"/home/index",children:"\u9996\u9875"})]})]})},Pn=function(){return Object(C.jsx)(l.c,{history:v,children:Object(C.jsxs)("div",{className:"app",children:[Object(C.jsx)(R,{activePath:"/home",exact:!0,path:"/home",children:Object(C.jsx)(Ze,{})}),Object(C.jsxs)(l.d,{children:[Object(C.jsx)(l.b,{exact:!0,path:"/",render:function(){return Object(C.jsx)(l.a,{to:"/home/index"})}}),Object(C.jsx)(l.b,{exact:!0,path:"/home",render:function(){return Object(C.jsx)(l.a,{to:"/home/index"})}}),Object(C.jsx)(l.b,{path:"/login",children:Object(C.jsx)(pe,{})}),Object(C.jsx)(I,{path:"/profile/edit",children:Object(C.jsx)(dt,{})}),Object(C.jsx)(l.b,{exact:!0,path:"/search",children:Object(C.jsx)(mt,{})}),Object(C.jsx)(l.b,{path:"/search/result",children:Object(C.jsx)(vt,{})}),Object(C.jsx)(l.b,{path:"/article/:id",children:Object(C.jsx)(Zt,{})}),Object(C.jsx)(l.b,{path:"/chat",children:Object(C.jsx)(cn,{})}),Object(C.jsx)(I,{path:"/profile/feedback",children:Object(C.jsx)(sn,{})}),Object(C.jsx)(I,{path:"/profile/activity",children:Object(C.jsx)(xn,{})}),Object(C.jsx)(I,{path:"/profile/fans",children:Object(C.jsx)(kn,{})}),Object(C.jsx)(I,{path:"/profile/article",children:Object(C.jsx)(In,{})}),Object(C.jsx)(I,{path:"/profile/notification",children:Object(C.jsx)(qn,{})}),Object(C.jsx)(l.b,{path:"*",render:function(e){return e.location.pathname.startsWith("/home")?null:Object(C.jsx)(zn,{})}})]})]})})},Bn=(n(694),n(67)),Dn=n(251),Jn=n(252),Wn={},Yn={profile:{},userInfo:{},userArticle:{results:[]},userFigure:{},userFans:{followings:{results:[]},followers:{results:[]}},userArticleList:{"/article/collections":{results:[]},"/user/histories":{results:[]},"/user/articles":{results:[]}},userNotification1:{all:{results:[]},comment:{results:[]},thumbsup:{results:[]},fans:{results:[]},system:{results:[]}}},Hn=n(253),Kn=n.n(Hn),Gn={channels:[],restChannels:[],articles:{},channelActiveIndex:0},Xn={suggestion:[],searchResult:{page:1,per_page:10,total_count:0,results:[]}},Vn={info:{},comment:{total_count:0,results:[]}},Qn=Object(Bn.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/setToken":return t.payload;default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/getProfile":return Object(_.a)(Object(_.a)({},e),{},{profile:t.payload});case"profile/updateUser":case"profile/updatePhoto":return Object(_.a)(Object(_.a)({},e),{},{userInfo:Object(_.a)(Object(_.a)({},e.userInfo),t.payload)});case"profile/getUserInfo":return Object(_.a)(Object(_.a)({},e),{},{userInfo:t.payload});case"profile/getUserArticle":return Object(_.a)(Object(_.a)({},e),{},{userArticle:Object(_.a)(Object(_.a)({},t.payload),{},{results:[].concat(Object(V.a)(e.userArticle.results),Object(V.a)(t.payload.results))})});case"profile/getUserFigure":return Object(_.a)(Object(_.a)({},e),{},{userFigure:t.payload});case"profile/getUserFans":var n=t.payload,c=n.type,r=n.data;return Object(_.a)(Object(_.a)({},e),{},{userFans:Object(_.a)(Object(_.a)({},e.userFans),{},Object($e.a)({},c,Object(_.a)(Object(_.a)({},r),{},{results:[].concat(Object(V.a)(e.userFans[c].results),Object(V.a)(r.results))})))});case"profile/getUserArticleList":var a=t.payload,s=a.type,i=a.data;return Object(_.a)(Object(_.a)({},e),{},{userArticleList:Object(_.a)(Object(_.a)({},e.userArticleList),{},Object($e.a)({},s,Object(_.a)(Object(_.a)({},i),{},{results:[].concat(Object(V.a)(e.userArticleList[s].results),Object(V.a)(i.results))})))});case"profile/getUserNotification":var o=t.payload,l=o.type,u=o.data;return Object(_.a)(Object(_.a)({},e),{},{userNotification1:Object(_.a)(Object(_.a)({},e.userNotification1),{},Object($e.a)({},l,Object(_.a)(Object(_.a)({},u),{},{results:[].concat(Object(V.a)(e.userNotification1[l].results),Object(V.a)(u.results))})))});default:return e}},home:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,c=arguments.length>1?arguments[1]:void 0;switch(c.type){case"home/getMyChannels":return Object(_.a)(Object(_.a)({},n),{},{channels:c.payload});case"home/getRestChannels":return Object(_.a)(Object(_.a)({},n),{},{restChannels:c.payload});case"home/addChannel":var r=n.restChannels.find((function(e){return e.id===c.payload}));return Object(_.a)(Object(_.a)({},n),{},{restChannels:n.restChannels.filter((function(e){return e.id!==c.payload})),channels:[].concat(Object(V.a)(n.channels),[r])});case"home/deleteChannel":return Object(_.a)(Object(_.a)({},n),{},{channels:n.channels.filter((function(e){return e.id!==c.payload.id})),restChannels:Kn()([].concat(Object(V.a)(n.restChannels),[c.payload]),"id")});case"home/selectTab":return Object(_.a)(Object(_.a)({},n),{},{channelActiveIndex:c.payload});case"home/getArticles":return Object(_.a)(Object(_.a)({},n),{},{articles:Object(_.a)(Object(_.a)({},n.articles),{},Object($e.a)({},c.payload.channelId,{prevTime:c.payload.prevTime,list:c.payload.list}))});case"home/getMoreArticles":var a=c.payload.channelId,s=null!==(e=null===(t=n.articles[a])||void 0===t?void 0:t.list)&&void 0!==e?e:[];return Object(_.a)(Object(_.a)({},n),{},{articles:Object(_.a)(Object(_.a)({},n.articles),{},Object($e.a)({},a,{prevTime:c.payload.prevTime,list:[].concat(Object(V.a)(s),Object(V.a)(c.payload.list))}))});case"home/updateCommentMount":var i=c.payload.channelId,o=c.payload.articleId;return Object(_.a)(Object(_.a)({},n),{},{articles:Object(_.a)(Object(_.a)({},n.articles),{},Object($e.a)({},i,Object(_.a)(Object(_.a)({},n.articles[i]),{},{list:n.articles[i].list.map((function(e){return e.art_id===o?Object(_.a)(Object(_.a)({},e),{},{comm_count:c.payload.comm_count}):e}))})))});default:return n}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"search/getSuggestion":return Object(_.a)(Object(_.a)({},e),{},{suggestion:t.payload});case"search/getSearchResult":return Object(_.a)(Object(_.a)({},e),{},{searchResult:t.payload});case"search/resetSuggestion":return Object(_.a)(Object(_.a)({},e),{},{suggestion:[]});default:return e}},article:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"article/getArticleById":return Object(_.a)(Object(_.a)({},e),{},{info:t.payload});case"article/getArticleComment":return Object(_.a)(Object(_.a)({},e),{},{comment:t.payload});case"article/getMoreArticleComments":return console.log(t.payload),Object(_.a)(Object(_.a)({},e),{},{comment:Object(_.a)(Object(_.a)({},t.payload),{},{results:[].concat(Object(V.a)(e.comment.results),Object(V.a)(t.payload.results))})});case"article/updateInfo":return Object(_.a)(Object(_.a)({},e),{},{info:Object(_.a)(Object(_.a)({},e.info),{},Object($e.a)({},t.payload.name,t.payload.value))});case"article/sendComment":return Object(_.a)(Object(_.a)({},e),{},{info:Object(_.a)(Object(_.a)({},e.info),{},{comm_count:e.info.comm_count+1}),comment:Object(_.a)(Object(_.a)({},e.comment),{},{total_count:e.comment.total_count+1,results:[t.payload.new_obj].concat(Object(V.a)(e.comment.results))})});case"article/updateCommentCount":return Object(_.a)(Object(_.a)({},e),{},{comment:Object(_.a)(Object(_.a)({},e.comment),{},{results:e.comment.results.map((function(e){return e.com_id===t.payload.commentId?Object(_.a)(Object(_.a)({},e),{},{reply_count:t.payload.total}):e}))})});case"comment/updateInfo":return Object(_.a)(Object(_.a)({},e),{},{comment:Object(_.a)(Object(_.a)({},e.comment),{},{results:e.comment.results.map((function(e){var n;return e.com_id===t.payload.target?Object(_.a)(Object(_.a)({},e),{},(n={},Object($e.a)(n,t.payload.name,t.payload.value),Object($e.a)(n,"like_count",e.like_count+t.payload.like_count),n)):e}))})});default:return e}}}),Zn=Object(Dn.composeWithDevTools)(Object(Bn.applyMiddleware)(Jn.a)),$n={login:f()},ec=Object(Bn.createStore)(Qn,$n,Zn);r.a.render(Object(C.jsx)(a.a,{store:ec,children:Object(C.jsx)(Pn,{})}),document.querySelector("#root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");s?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):i(t,e)}))}}(),o()}},[[703,1,2]]]);
//# sourceMappingURL=main.29ec297a.chunk.js.map